<script type="text/javascript">
  // <![CDATA[
  function check_all(sender, checkboxes){
    for (i = 0; i < checkboxes.length; i++){
      checkboxes[i].checked=sender.checked
    }
  }
  // ]]>
</script>

<% form_tag({:action => "delete_many"}, {:name => "delete_many_form"}) do %>
  <table>
    <thead>
      <tr>
        <th class="timestamp">When</th>
        <th class="url">URL</th>
        <th class="keywords">Keywords</th>
        <th class="delete"><input type="checkbox" id="multiple_select" onclick="check_all(this, document.delete_many_form.for_deletion_)" /></th>
      </tr>
    </thead>
    <tbody>
      <% @logs.each_with_index do |log, index| %>
        <tr>
          <td class="timestamp" title="<%= log.timestamp %>"><%= time_ago_in_words(log.timestamp) %></td>
          <td class="url"><a href="<%= log.referer %>" title="<%= log.referer %>"><%= truncate log.referer %></a></td>
          <td class="keywords" title="<%= log.keywords %>">
            <% unless log.keywords.nil? %>
              <%= truncate log._id %>
            <% end %>
          </td>
          <td class="delete">
            <%= check_box_tag("for_deletion[]", log._id) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div style="text-align: right; margin-top: 10px">
    <%= submit_tag("Delete selected") %>
  </div>
<% end %>

<%if @page > 0%>
  <div style="margin-right: 20px; float: left">
    <%=  link_to "<< previous", {:action => :list, :next_startkey => @previous_pages_logs_ids[@page - 1], :previous_pages => @previous_pages_logs_ids[0, @page-1], :page => @page - 1}%>
  </div>
<%end%>
<%unless @next_page_log_id.nil? %>
  <div style="float: left">
    <%=  link_to "next >>", {:action => :list, :next_startkey => @next_page_log_id, :previous_pages => @previous_pages_logs_ids, :page => @page + 1}%>
  </div>
<%end%>